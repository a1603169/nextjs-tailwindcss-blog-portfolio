---
title: 'GCP Cloud Engineer - 58'
subtitle: 'Essential Cloud Infrastructure: Sacling and Automation - Choosing a Load Balancer'
date: '2024-04-18'
tags: [Cloud, GCP]
---

### **Google Cloud 부하 분산기 선택 기준**

- **`IPv6 클라이언트 지원`**:
  
  - ㅁ HTTP(S), SSL 프록시, TCP 프록시 부하 분산 서비스가 IPv6 클라이언트를 지원합니다.
  
  - ㅁ 이 부하 분산기는 IPv6 요청을 처리하고 백엔드로 IPv4를 통해 프록시할 수 있습니다.

- **`부하 분산기의 작동 방식`**:
  
  - ㅁ 부하 분산기는 `리버스 프록시`로 작동하여 `IPv6 클라이언트 연결을 종료하고 백엔드에 대한 IPv4 연결에 요청을 배치`합니다.
  
  - ㅁ IPv4 응답을 받아 원래 클라이언트의 IPv6 연결에 다시 배치합니다.

### **부하 분산기 유형 선택**

- **`애플리케이션 부하 분산기`**:
  
  - ㅁ `HTTP(S) 트래픽`을 사용하는 `애플리케이션에 유연한 기능`이 필요한 경우 선택합니다.

- **`프록시 네트워크 부하 분산기`**:
  
  - ㅁ `TLS 오프로드`, `TCP 프록시`, `멀티 리전 백엔드 지원`을 제공합니다.
  
  - ㅁ `클라이언트 소스 IP 주소 보존`과 `프록시 오버헤드 방지`가 필요할 때 적합합니다.

- **`패스 스루 네트워크 부하 분산기`**:
  
  - ㅁ `UDP, ESP, ICMP`와 같은 추가 프로토콜을 지원합니다.
  
  - ㅁ `클라이언트 IP 주소 노출`이 중요한 애플리케이션에 적합합니다.

### **부하 분산기 사용 결정**

- **`애플리케이션의 요구사항`**:
  
  - ㅁ 애플리케이션이 `외부용인지 내부용인지`를 고려합니다.
  
  - ㅁ 백엔드를 `전역으로 배포`할지 `리전별로 배포`할지 결정합니다.

- **`부하 분산 스키마`**:
  
  - ㅁ `MANAGED`: Google 프런트엔드 또는 오픈소스 Envoy 프록시에 관리형 서비스로 구현됩니다.
  
  - ㅁ 부하 분산기가 `GFE 또는 Envoy 프록시`로 라우팅되는 요청을 처리합니다.

-------

### 모르는 단어 

#### 리버스 프록시

리버스 프록시(Reverse Proxy)는 `클라이언트와 인터넷 사이에 위치하여 클라이언트의 요청을 대신 처리하고, 그 결과를 클라이언트에게 반환하는 서버`를 의미합니다.

리버스 프록시의 주요 기능은 다음과 같습니다:

**로드 밸런싱:** 

클라이언트의 요청을 여러 서버에 분산시켜 서버의 부하를 줄이는 역할을 합니다.

**SSL 암호화:** 
클라이언트와의 통신을 암호화하고, 내부 서버와의 통신은 암호화하지 않아서 내부 네트워크의 부하를 줄일 수 있습니다.

**캐싱:** 
자주 요청되는 콘텐츠를 캐시하여 빠르게 제공하고, 백엔드 서버의 부하를 줄입니다.

**보안:** 
내부 네트워크를 외부로부터 보호하고, 공격을 감지하거나 차단하는 역할을 합니다.

따라서, 리버스 프록시는 웹 서버의 성능 향상, 보안 강화, 그리고 추가적인 기능 제공 등을 위해 널리 사용됩니다.

#### 프록시 할 수 있다

"프록시할 수 있다"는 표현은 `특정 서비스나 시스템이 프록시 서버의 역할을 수행할 수 있다는 것을 의미`합니다.

프록시 서버는 `클라이언트와 목적지 서버 사이에 위치`하여 `클라이언트의 요청을 받아 목적지 서버로 전달`하고, `목적지 서버의 응답을 받아 클라이언트로 반환하는 역할`을 합니다.

이를 통해 클라이언트와 목적지 서버 사이의 통신을 중개하고 제어합니다.

따라서 "IPv6 요청을 처리하고 백엔드로 IPv4를 통해 프록시할 수 있다"는 표현은 해당 부하 분산기가 IPv6 클라이언트의 요청을 받아 백엔드 서버로 전달하고, 

백엔드 서버의 응답을 클라이언트로 반환하는 프록시 서버의 역할을 수행할 수 있다는 것을 의미합니다. 이는 IPv6와 IPv4 간의 통신을 가능하게 합니다.

**TLS 오프로드:** 

TLS 오프로드는 `SSL/TLS 암호화 및 복호화 작업을 백엔드 서버에서 제거하고 이를 부하 분산기나 다른 중간 장치에 위임하는 과정을 의미`합니다. 

이를 통해 백엔드 서버의 CPU 부하를 줄이고, 서버의 성능을 향상시킬 수 있습니다. 

TLS 오프로드는 주로 SSL 프록시 부하 분산이나 SSL VPN 장치에서 사용됩니다.

**TCP 프록시:** 

`TCP 프록시는 클라이언트와 서버 사이에 위치하여 TCP 트래픽을 중개하는 서버를 의미`합니다. 

TCP 프록시는 클라이언트의 연결을 받아 대상 서버로 전달하고, 서버의 응답을 클라이언트로 반환합니다. 

이를 통해 네트워크 트래픽을 제어하고, 보안을 향상시키며, 로드 밸런싱을 수행할 수 있습니다. 

TCP 프록시는 주로 부하 분산, 보안 게이트웨이, 캐싱, 또는 콘텐츠 필터링 등의 목적으로 사용됩니다.