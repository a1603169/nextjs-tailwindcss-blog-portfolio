---
title: 'GCP Cloud Engineer - 64'
subtitle: 'Essential Cloud Infrastructure: Sacling and Automation - Kubernetis Concepts'
date: '2024-04-19'
tags: [Cloud, GCP, Kubernetes]
---

### **`Kubernetes 객체 모델`**

- ㅁ Kubernetes가 관리하는 모든 것은 `객체`로 표현됩니다.

- ㅁ 이러한 객체, 속성 및 상태를 볼 수 있고 변경할 수 있습니다.

### **`선언적 관리 원칙`**

- ㅁ Kubernetes는 사용자가 관리 대상 객체의 상태를 `어떤 상태로 원하는지 알려주기를 기대`합니다.

- ㅁ Kubernetes는 그 `상태를 만들어내고 유지하기 위해 노력`합니다.

- ㅁ 이를 위해 이른바 '`감시 루프(watch loop)`'를 사용합니다.

### **Kubernetes 객체**

- ㅁ `지속적인 엔터티`로 정의되며, 클러스터에서 `실행 중인 상태, 원하는 상태, 현재 상태`를 나타냅니다.

- ㅁ 다양한 종류의 객체가 있으며, 컨테이너 애플리케이션, 사용 가능한 리소스, 동작에 영향을 주는 정책을 나타냅니다.

- ㅁ 객체에는 두 가지 중요한 요소가 있습니다:

  - `객체 스펙`: 생성하려는 각 객체에 대해 Kubernetes에 제공하며, 원하는 특성을 정의합니다.

  - `객체 상태`: Kubernetes 컨트롤 플레인에서 제공하는 객체의 현재 상태입니다.

### **`Kubernetes 컨트롤 플레인`**

- ㅁ Kubernetes 클러스터를 작동시키기 위해 협력하는 다양한 시스템 프로세스를 가리킵니다.

### **`Pod`**

- ㅁ 표준 Kubernetes 모듈의 기본 구성 요소이며, 배포 가능한 `최소 Kubernetes 객체`입니다.

- ㅁ Kubernetes 시스템에서 실행 중인 모든 컨테이너는 Pod입니다.

- ㅁ Pod는 컨테이너가 살아가는 `환경`을 체현하며, 하나 이상의 컨테이너를 수용할 수 있습니다.

- ㅁ Pod 내의 컨테이너는 `긴밀하게 연결`되어 있으며, 네트워킹 및 스토리지 리소스를 공유합니다.

- ㅁ Kubernetes는 각 Pod에 `고유한 IP 주소`를 할당합니다.

- ㅁ Pod 내의 모든 컨테이너는 IP 주소와 네트워크 포트를 포함한 `네트워크 네임스페이스`를 공유합니다.

- ㅁ 동일한 Pod 내의 컨테이너는 `localhost 127.0.0.1`을 통해 통신할 수 있습니다.

- ㅁ Pod는 컨테이너 간에 공유될 `스토리지 볼륨 세트`를 지정할 수 있습니다.

### **예시**


- ㅁ nginx 웹 서버의 인스턴스 세 개를 각각 자체 컨테이너에서 실행하고 싶다고 가정해 봅시다.

- ㅁ Kubernetes에서는 선언적 관리 원칙에 따라 이러한 nginx 컨테이너를 나타내는 `객체`를 선언합니다.

- ㅁ 아마도 `Pod` 객체일 것입니다.

- ㅁ Kubernetes의 역할은 그 Pod를 시작하고 존재하도록 유지하는 것입니다.

- ㅁ 하지만 Pod는 `자가 치유 기능이 없`습니다.

- ㅁ nginx 웹 서버를 팀으로 협력하도록 하려면, 더 발전된 종류의 객체를 사용해야 할 수 있습니다.

### **작동 방식**


- ㅁ 우리가 Kubernetes에게 세 개의 nginx Pod로 구성된 원하는 상태를 제공했다고 가정해 봅시다.

- ㅁ Kubernetes는 원하는 상태와 현재 상태를 비교합니다.

- ㅁ 현재 상태가 원하는 상태와 일치하지 않으면, Kubernetes의 `컨트롤 플레인`이 상황을 개선합니다.

- ㅁ 원하는 Pod 실행 개수는 세 개이지만 현재 실행 중인 것이 없으므로, 세 개의 Pod가 시작될 것입니다.

- ㅁ Kubernetes 컨트롤 플레인은 클러스터 상태를 지속적으로 모니터링하여 선언된 내용과 비교하고 필요에 따라 상태를 개선합니다.